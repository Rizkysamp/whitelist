<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Whitelist | Millanium Roleplay</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .loader{border-top-color:#06b6d4;animation:spinner 1.5s linear infinite}@keyframes spinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}#rulesModal,#mainPanel{display:none}
        body{-webkit-user-select:none;user-select:none;background-color:#0f172a;touch-action:manipulation}
    </style>
</head>
<body class="text-white font-sans flex items-center justify-center min-h-screen p-4" oncontextmenu="return false;">

    <div id="loadingScreen" class="fixed inset-0 bg-slate-950 z-50 flex flex-col items-center justify-center">
        <div class="loader ease-linear rounded-full border-4 border-t-4 border-slate-800 h-10 w-10 mb-4"></div>
        <p class="text-cyan-500 font-bold tracking-[0.3em] text-[9px] uppercase animate-pulse">Establishing Secure Connection...</p>
    </div>

    <div id="rulesModal" class="fixed inset-0 z-40 flex items-center justify-center p-4 bg-black/90 backdrop-blur-md">
        <div class="bg-slate-900 border border-slate-800 w-full max-w-sm rounded-3xl p-8 shadow-2xl border-t-2 border-t-cyan-500">
            <div class="text-center mb-6">
                <h2 class="text-lg font-black uppercase tracking-tighter">Identity Protocol</h2>
                <p class="text-slate-500 text-[10px]">Millanium Security Verification</p>
            </div>
            <div class="space-y-4 text-[12px] text-slate-400 mb-8 border-l-2 border-cyan-500/30 pl-4">
                <p>1. Gunakan Nama_Belakang (IC).</p>
                <p>2. Dilarang duplikasi identitas.</p>
                <p>3. Patuhi aturan Roleplay Millanium.</p>
            </div>
            <button onclick="acceptRules()" class="w-full bg-cyan-600 hover:bg-cyan-500 text-white font-black py-4 rounded-2xl transition-all active:scale-95 text-[11px] tracking-widest uppercase">
                Authorize Identity
            </button>
        </div>
    </div>

    <div id="mainPanel" class="max-w-sm w-full p-8 bg-slate-900 rounded-[2.5rem] shadow-2xl border border-slate-800 relative">
        <div class="text-center mb-8">
            <h1 class="text-xl font-black tracking-tighter italic text-cyan-500">MILLANIUM RP</h1>
            <p class="text-slate-500 text-[9px] uppercase tracking-[0.4em] mt-1 font-bold">Encrypted Interface</p>
        </div>

        <div class="space-y-5">
            <input type="text" id="playerName" class="w-full px-5 py-4 bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-cyan-500/50 outline-none transition-all text-sm text-white font-mono placeholder-slate-600 shadow-inner" placeholder="IDENTITY_NAME">
            <button onclick="submitWhitelist()" id="btnSubmit" class="w-full bg-white text-black font-black py-4 rounded-2xl transition-all flex items-center justify-center text-[10px] tracking-[0.2em] uppercase active:scale-95">
                <span id="btnText">Execute Sync</span>
            </button>
        </div>

        <div id="statusBox" class="mt-4 hidden p-4 rounded-2xl text-[10px] font-mono text-center border border-slate-800 bg-slate-800/50"></div>

        <div class="mt-8 pt-6 border-t border-slate-800/50 flex flex-col items-center gap-1">
            <p class="text-[9px] text-slate-600 font-bold tracking-widest">SERVER_NODE: 159.223.83.82:5163</p>
            <p class="text-[8px] text-slate-700 uppercase">System Â© 2025 Millanium RP</p>
        </div>
    </div>

    <script>
        /* ENCRYPTED LOGIC v3.0 - STABLE PROTECT
           Logic disembunyikan menggunakan Hex-Mapping agar tidak bisa dibaca/diganti sembarangan.
        */
        var _0x4d2e=['getElementById','style','display','none','loadingScreen','rulesModal','flex','readyState','complete','addEventListener','load','mainPanel','block','statusBox','innerText','className','classList','remove','hidden','add','disabled','btnSubmit','btnText','playerName','value','trim','POST','application/json','JSON','stringify','/api/whitelist','success','setItem','myWhitelist','error','getItem'];(function(_0x2d1a34,_0x5a1e3e){var _0x4d2e3b=function(_0x323f6e){while(--_0x323f6e){_0x2d1a34['push'](_0x2d1a34['shift']());}};_0x4d2e3b(++_0x5a1e3e);}(_0x4d2e,0x1b3));var _0x2774=function(_0x2d1a34,_0x5a1e3e){_0x2d1a34=_0x2d1a34-0x0;var _0x4d2e3b=_0x4d2e[_0x2d1a34];return _0x4d2e3b;};

        function init(){
            setTimeout(()=>{
                document[_0x2774('0x0')](_0x2774('0x4'))[_0x2774('0x1')][_0x2774('0x2')]=_0x2774('0x3');
                document[_0x2774('0x0')](_0x2774('0x5'))[_0x2774('0x1')][_0x2774('0x2')]=_0x2774('0x6');
            },2000);
        }

        if(document[_0x2774('0x7')]===_0x2774('0x8')){init();}else{window[_0x2774('0x9')](_0x2774('0xa'),init);}

        function acceptRules(){
            document[_0x2774('0x0')](_0x2774('0x5'))[_0x2774('0x1')][_0x2774('0x2')]=_0x2774('0x3');
            document[_0x2774('0x0')](_0x2774('0xb'))[_0x2774('0x1')][_0x2774('0x2')]=_0x2774('0xc');
            const saved=localStorage[_0x2774('0x23')](_0x2774('0x21'));
            if(saved){_0x5c42("AUTHORIZED: "+saved,"border-cyan-500/20 text-cyan-400");_0x1b42();}
        }

        async function submitWhitelist(){
            const input=document[_0x2774('0x0')](_0x2774('0x17'));
            const name=input[_0x2774('0x18')][_0x2774('0x19')]();
            const btn=document[_0x2774('0x0')](_0x2774('0x15'));
            const txt=document[_0x2774('0x0')](_0x2774('0x16'));
            
            if(localStorage[_0x2774('0x23')](_0x2774('0x21'))){alert("DEVICE_MATCH_FOUND");return;}
            if(!name || !name.includes("_")){_0x5c42("INVALID_ID_FORMAT","border-red-500/20 text-red-400");return;}

            btn[_0x2774('0x14')]=true;
            txt[_0x2774('0xe')]="SYNCING...";
            document[_0x2774('0x0')](_0x2774('0xd'))[_0x2774('0x12')][_0x2774('0x13')](_0x2774('0x11'));

            try{
                const res=await fetch(_0x2774('0x1e'),{
                    method:_0x2774('0x1a'),
                    headers:{'Content-Type':_0x2774('0x1b')},
                    body:JSON[_0x2774('0x1d')]({name:name})
                });
                const data=await res.json();
                if(data[_0x2774('0x1f')]){
                    localStorage[_0x2774('0x20')](_0x2774('0x21'),name);
                    _0x5c42("SYNC_SUCCESS: "+name,"border-green-500/20 text-green-400");
                    _0x1b42();
                }else{
                    _0x5c42("ERROR: "+(data[_0x2774('0x22')]||"REJECTED"),"border-red-500/20 text-red-400");
                    btn[_0x2774('0x14')]=false;
                    txt[_0x2774('0xe')]="Execute Sync";
                }
            }catch(e){
                _0x5c42("CONNECTION_LOST","border-red-500/20 text-red-400");
                btn[_0x2774('0x14')]=false;
                txt[_0x2774('0xe')]="Execute Sync";
            }
        }

        function _0x1b42(){
            const b=document[_0x2774('0x0')](_0x2774('0x15'));
            b[_0x2774('0x14')]=true;
            b[_0x2774('0x12')][_0x2774('0x13')]('opacity-30','cursor-not-allowed');
            document[_0x2774('0x0')](_0x2774('0x16'))[_0x2774('0xe')]="AUTHORIZED";
        }

        function _0x5c42(m,c){
            const s=document[_0x2774('0x0')](_0x2774('0xd'));
            s[_0x2774('0xe')]=m;
            s[_0x2774('0xf')]="mt-4 p-4 rounded-2xl text-[10px] font-mono text-center border "+c;
            s[_0x2774('0x12')][_0x2774('0x11')](_0x2774('0x13'));
        }
    </script>
</body>
</html>
